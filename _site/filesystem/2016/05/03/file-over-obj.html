<!DOCTYPE html>
<html lang="en-us">
  
  <head>
  <meta charset="UTF-8">
  <title>分享技术 品味生活</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/cayman.css">
</head>

  <body>
    <section class="page-header">
  <h1 class="project-name">分享技术 品味生活</h1>
  <h2 class="project-tagline">talk is cheap, show me the code</h2>
  <a href="https://github.com/qinglongyanyue/blog" class="btn">View on GitHub</a>
</section>

    <section class="main-content">
      
      <h3 id="准备环境">准备环境</h3>
<ul>
  <li>用virtualbox在macbook中安装ubuntu14.04，配置好网络。</li>
</ul>

<h3 id="开通对象存储服务">开通对象存储服务</h3>
<ul>
  <li>
    <p>我用的是阿里云的OSS，一键式开通。其他公有云完全类似，价格计算比较复杂，不过应该还是很便宜的。</p>
  </li>
  <li>
    <p>买了一个40GB的存储包，半年5元。再加上流量费和API调用费，如果只是用来测试备份一些桌面数据，价格应该还算OK。</p>
  </li>
  <li>
    <p>进入OSS管理界面，创建一个bucket就可以存放数据了。记得查看access keys，后面认证需要用到。</p>
  </li>
</ul>

<h3 id="安装部署ossfs">安装部署ossfs</h3>

<ul>
  <li>直接github搜到ossfs（基于s3fs &amp; FUSE），按照指南安装，过程非常顺利：
    <div class="highlighter-rouge"><pre class="highlight"><code>sudo apt-get update
sudo apt-get install gdebi-core
sudo gdebi your_ossfs_package
</code></pre>
    </div>
  </li>
  <li>配置：
    <div class="highlighter-rouge"><pre class="highlight"><code>echo your_bucket_name:your_key_id:your_key_secret &gt; /etc/passwd-ossfs
chmod 640 /etc/passwd-ossfs
mkdir /tmp/ossfs
ossfs your-bucket-name /tmp/ming -ourl=http://oss-cn-shenzhen.aliyuncs.com
</code></pre>
    </div>
  </li>
  <li>使用：
    <div class="highlighter-rouge"><pre class="highlight"><code>cd /tmp/ming
mkdir mingliang
echo hello world &gt; test
</code></pre>
    </div>
  </li>
  <li>
    <p>登录oss管理界面，立刻看到新创建的对象</p>
  </li>
  <li>
    <p>登录浏览器，也可以直接通过url访问该对象：
<code class="highlighter-rouge">http://mingliang.oss-cn-shenzhen.aliyuncs.com/test</code></p>
  </li>
  <li>Posix语义可能有不完善，git clone直接失败；不适合用来做开发目录，适合用来存档，备份之类
    <div class="highlighter-rouge"><pre class="highlight"><code>#/mnt git clone https://github.com/aliyun/ossfs.git
Cloning into 'ossfs'...
fatal: Fetch attempted without a local repo
</code></pre>
    </div>
  </li>
  <li>在阿里云的VM中体验更好（内部网络必须好啊），性能更好，git clone也能成功</li>
</ul>

<h3 id="感受">感受</h3>
<ul>
  <li>安装部署体验不错，非常简单快捷</li>
  <li>一份数据可以用fs的方式访问，也可以http share出去，多端同步很有价值</li>
  <li>默认是sync模式挂载的，ls，cd，touch，echo各个命令都很卡，不是一个FS的体验</li>
  <li>折腾半天也没有把cache模式弄出来，只能忍受巨慢的速度啦</li>
  <li>语义上会有不少欠缺，明确提到不支持硬link和原子rename</li>
</ul>


      <footer class="site-footer">
  <span class="site-footer-owner"><a href="http://localhost:4000">分享技术 品味生活</a> is maintained by <a href="l.ming@huawei.com">Author mingliang</a>.</span>
  <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
</footer>


    </section>

  </body>
</html>
