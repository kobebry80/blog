<!DOCTYPE html>
<html lang="en-us">
  
  <head>
  <meta charset="UTF-8">
  <title>分享技术 品味生活</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/cayman.css">
</head>

  <body>
    <section class="page-header">
  <h1 class="project-name">分享技术 品味生活</h1>
  <h2 class="project-tagline">talk is cheap, show me the code</h2>
  <a href="https://github.com/qinglongyanyue/blog" class="btn">View on GitHub</a>
</section>

    <section class="main-content">
      
      <ul>
  <li>VM配置：规格m3.medium，ubuntu 14.04（其实2个不同的VM，2个AZ就够了）. 为了省钱，选择了带个本地4GB SSD，3.7G内存，中等带宽的网络。</li>
</ul>

<h2 id="先爽下4gb的ssd盘">先爽下4GB的SSD盘</h2>

<ul>
  <li>测试工具：IO
    <div class="highlighter-rouge"><pre class="highlight"><code>sudo fio -filename=/dev/xvdb -direct=1 -thread -ioengine=libaio -bs=4k -numjobs=1 -runtime=30 -group_reporting -name=mytest  -size=1000M -rw=write -iodepth 1
</code></pre>
    </div>
  </li>
  <li>队列深度为1延迟
    <ul>
      <li>230us(写)/58us(读)</li>
    </ul>
  </li>
  <li>随机IOPS(4KB块大小):
    <ul>
      <li>写IOPS：9307，此时延迟：3.4ms（似乎有QoS控制，达到上限）</li>
      <li>读IOPS:41544，此时延迟：3.1ms（到达上限）</li>
    </ul>
  </li>
  <li>顺序带宽（128KB块大小,4GB写满）：</li>
  <li>写带宽：89MB/s</li>
  <li>读带宽：718MB/s</li>
</ul>

<h2 id="在试试ebs-ssd的系统卷">在试试EBS SSD的系统卷</h2>
<p>规格说IOPS在300～3000</p>

<ul>
  <li>队列深度为1延迟
    <ul>
      <li>575us(写)/184us(读)</li>
    </ul>
  </li>
  <li>随机IOPS(4KB块大小):
    <ul>
      <li>写IOPS：3000，此时延迟：1.3ms（QoS控制，达到上限）</li>
      <li>读IOPS:3000，此时延迟：184us（到达上限）</li>
    </ul>
  </li>
  <li>顺序带宽（128KB块大小）：</li>
  <li>写带宽：40MB/s</li>
  <li>读带宽：70MB/s</li>
</ul>



      <footer class="site-footer">
  <span class="site-footer-owner"><a href="http://localhost:4000">分享技术 品味生活</a> is maintained by <a href="l.ming@huawei.com">Author mingliang</a>.</span>
  <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
</footer>


    </section>

  </body>
</html>
