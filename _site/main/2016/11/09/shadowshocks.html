<!DOCTYPE html>
<html lang="en-us">
  
  <head>
  <meta charset="UTF-8">
  <title>分享技术 品味生活</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/cayman.css">
</head>

  <body>
    <section class="page-header">
  <h1 class="project-name">分享技术 品味生活</h1>
  <h2 class="project-tagline">talk is cheap, show me the code</h2>
  <a href="https://github.com/qinglongyanyue/blog" class="btn">View on GitHub</a>
</section>

    <section class="main-content">
      
      <h2 id="1准备条件">1.准备条件</h2>
<p>一台境外的虚拟机（买便宜的vps，或者用境外的docker）<br />
shadowsocks</p>

<h2 id="2shadowsocks介绍">2.shadowsocks介绍</h2>
<p>“A fast tunnel proxy that helps you bypass firewalls”<br />
(一个可穿透防火墙的快速代理)<br />
github link— https://github.com/shadowsocks/shadowsocks-libev</p>

<h2 id="3vm上运行shadowsocks">3.vm上运行shadowsocks</h2>
<p>apt-get update 
apt-get install python-pip 
pip install shadowsocks 
pip 是 python 下的方便安装的工具，类似 apt-get。<br />
写一个配置文件保存为etc/shadowsocks.json，作为服务启动配置</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"server"</span><span class="p">:</span><span class="s2">"my_server_ip"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"server_port"</span><span class="p">:</span><span class="mi">8388</span><span class="p">,</span><span class="w">
   </span><span class="nt">"local_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"local_port"</span><span class="p">:</span><span class="mi">1080</span><span class="p">,</span><span class="w">
   </span><span class="nt">"password"</span><span class="p">:</span><span class="s2">"mypassword"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"timeout"</span><span class="p">:</span><span class="mi">300</span><span class="p">,</span><span class="w">
   </span><span class="nt">"method"</span><span class="p">:</span><span class="s2">"aes-256-cfb"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"fast_open"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="err">启动ssserver</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">/etc/shadowsocks.json</span><span class="w"> </span><span class="err">-d</span><span class="w"> </span><span class="err">start</span><span class="w">   
</span></code></pre>
</div>

<p><code class="highlighter-rouge">坑：</code>这里有个比较坑的地方，aws默认的安全组只开了22端口的ssh权限，http无法连接，需要去设置一下aws ec2的安全组。</p>

<h2 id="4启动客户端">4.启动客户端</h2>
<p>下载windows客户端（mac，android类似）可以去github下载<br />
设置时候对照着2中的json填，也支持直接导入json<br />
接下来享受google，facebook，youtube~~</p>

<h2 id="5将shadowsocks跑在容器中脱离vm限制">5.将shadowsocks跑在容器中，脱离vm限制</h2>
<p>可以去境外买个docker服务，run在容器中，便宜点<br />
灵雀云有海外版，以前会送优惠券，现在没了<br />
daocloud`海外机房似乎还没有上线<br />
时速云有海外机房提供容器服务，需要充值</p>

<p><code class="highlighter-rouge">小坑：</code>容器run时候需要设置一下command参数（json的配置），否则无法正常启动</p>

<h2 id="6我搭建的代理信息">6.我搭建的代理信息</h2>
<p>最后搭建了一个跑在aws中的容器，在daocloud中托管。<br />
如果你想使用，请到github下载客户端（pc or Android），配置按照下面的来即可</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   "server_port":2016,
   "local_address": "52.35.90.109",
   "local_port":any,
   "password":"suzhen336",
   "timeout":300,
   "method":"aes-256-cfb",
</code></pre>
</div>

<h2 id="shadowshocks转http">shadowshocks转HTTP</h2>

<ul>
  <li>
    <p>Linux：
<a href="https://mritd.me/2016/07/22/Linux-%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E4%BD%BF%E7%94%A8-Shadowsocks-%E4%BB%A3%E7%90%86/">Linux 命令行下使用 Shadowsocks 代理</a></p>
  </li>
  <li>
    <p>MAC：
<a href="http://droidyue.com/blog/2016/04/04/set-shadowsocks-proxy-for-terminal/index.html">为终端设置Shadowsocks代理</a></p>
  </li>
  <li>
    <p>配置MAC的host OS与virtual box的ubuntu数据互通
<a href="http://askubuntu.com/questions/456400/why-cant-i-access-a-shared-folder-from-within-my-virtualbox-machine">MAC与ubuntu挂同一个目录</a></p>
  </li>
  <li>
    <p><a href="http://www.akmumu.com/2015/07/07/367.html">把MAC配置成代理服务器</a>，这样MAC上的VM都能通过这个代理访问国外网站啦]</p>
  </li>
  <li>
    <p><a href="https://coreos.com/os/docs/latest/booting-on-virtualbox.html">Virtual Box安装CoreOS</a></p>
  </li>
</ul>

<p>从此世界畅通啦。。</p>


      <footer class="site-footer">
  <span class="site-footer-owner"><a href="http://localhost:4000">分享技术 品味生活</a> is maintained by <a href="l.ming@huawei.com">Author mingliang</a>.</span>
  <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
</footer>


    </section>

  </body>
</html>
